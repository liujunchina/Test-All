<!doctype html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Angular Js Test3</title>
    <style>
        body {
            font-family: "微软雅黑", "Helvetica Neue", Helvetica, Arial, sans-serif;
        }

        .warp {
            width: 1000px;
            height: auto;
            position: relative;
            margin: 100px auto;
            padding: 30px;
            border: 1px solid #C7C4C4;
            -webkit-border-radius: 5px;
            -moz-border-radius: 5px;
            border-radius: 5px;
        }

        h1, h2 ,h3{
            font-size: 24px;
            font-weight: bold;
            margin: 20px 0;
        }

        h2 {
            font-size: 16px;
        }

        hr {
            color: #003300;
            margin: 20px 0;
        }

        div.div {
            background-color: #cccccc;
            -webkit-border-radius: 5px;
            -moz-border-radius: 5px;
            border-radius: 5px;
            padding: 10px 15px;
        }
        .fcblack {
            color: #000;
        }
        .fcred {
            color: red;
        }

        .fcw {
            color: white;
        }

        .fcb {
            color: blue;
        }

        .fch {
            color: #cccccc;
        }

        img, div {
            display: block;
            margin: 0;
            padding: 0;
        }
        li>img{
            max-width: 150px;
            height: auto;
        }
        li{
            position: relative;
            margin: 10px 0;
            list-style: none;
        }
        li:hover>.span_hover{
            opacity: 1 !important;
        }
    </style>
</head>
<body>
<div class="warp" ng-app="myApp">
    <H1>Anjular JS</H1>

    <div class="div" ng-controller="myController">
        <h2>ng-src</h2>
        <ul>
            <li>
                <img src="./images/3.jpg" alt=""/>
            </li>
            <li>
                <span>直接 src 标签会被浏览器先解析报错</span>
                <img src="./images/{{myImg.src}}.jpg" alt=""/>
            </li>
            <li>
                <span class="span_hover" style="z-index:9;display:block;position: absolute;top:20px;left:20px;opacity:0;pointer-events:none;-webkit-transition: all 0.4s;-moz-transition: all 0.4s;-ms-transition: all 0.4s;-o-transition: all 0.4s;transition: all 0.4s;">点击我 试试看</span>
                <img ng-src="./images/{{myImg.src}}.jpg" alt="" ng-click="changeImg()"/>
            </li>
        </ul>
        <!-- -->
        <h2>ng-href</h2>
        <ul>
            <li>
                <a href="http://www.baidu.com" target="_blank">百度</a>
            </li>
            <li>
                <a href="{{myLink.href}}" target="_blank">百度</a></li>
            </li>
            <li>
                <a ng-href="{{myLink.href}}" target="_blank">百度</a>
            </li>
        </ul>
        <!-- -->
        <h2>ng-click</h2>
        <ul>
            <li><span>获取当前元素 可以使用 $event.currenTarget 类似jQ this</span></li>
            <li><a href="javascript:void(0);" ng-click="ngClick($event)">ng-click 绑定事件</a></li>
            <li><a href="javascript:void(0);" ng-mouseover="ngMouseover($event,'xxxx')">ng-mouseover 绑定事件</a></li>
            <li><a href="javascript:void(0);" ng-dblclick="ngDblclick($event)">ng-dblclick 绑定事件</a></li>
        </ul>

        <!-- -->
        <h2>ng-form</h2>
        <ul>
            <li>
                <h3>ng-form 1</h3>
                <p>验证数据时候根据 From 中元素的name 来做判断<br />就类似于格式 formName.ElmName.$dirty($error ..)</p>
                <form action="" name="myNgForm">
                    <p>Username:</p>
                    <p><input type="text" name="username" ng-model="myForm.username" required /></p>
                    <span style="color:red;" ng-show="myNgForm.username.$dirty && myNgForm.username.$error">
                        <span ng-show="myNgForm.username.$error.required">必填选项</span>
                    </span>

                    <p><input type="email" name="email" ng-model="myForm.email" required /></p>
                    <span style="color:red" ng-show="myNgForm.email.$dirty && myNgForm.email.$error">
                        <span ng-show="myNgForm.email.$error.email">必须为Email格式</span>
                        <span ng-show="myNgForm.email.$error.required">必填选项</span>
                    </span>
                    
                    <p>
                        <input type="submit" ng-disabled="myNgForm.username.$dirty && myNgForm.username.$error.required || myNgForm.email.$dirty && (myNgForm.email.$error.required || myNgForm.email.$error.email)">
                    </p>
                    <p>{{myNgForm.$error}}</p>
                </form>

            </li>
            <li>
                <h3>ng-form 2</h3>
                <form action="" name="myNgForm2">
                    <p>input:text </p>
                    <p><input type="text" name="username" ng-model="myForm2.username"/></p>
                    <button ng-click="myForm2.see($event)">Click</button>
                    <p>password: </p>
                    <p><input type="text" name="pass" ng-model="myForm2.pass" ng-required/></p>
                    <p>
                        <span style="color:red;" ng-show="myNgForm2.pass.$dirty">
                            <span ng-show="myNgForm2.pass.$error.required">不能为空</span>
                        </span>
                    </p>
                    <p><span>{{myNgForm.$error}}</span></p>
                    <p>
                        <p>input:checkbox </p>
                        <input type="checkbox" name="checkbox" id="check" value="1" ng-model="myForm2.checkboxVal" ng-true-value="AA" ng-false-value="BB" />
                        <span>{{myForm2.checkboxVal}}</span>
                    </p>

                    <p>
                        <p>input:radio </p>
                        <input type="radio" name="radio" ng-model="myForm2.checkboxVal" value="AA" /> <br />
                        <input type="radio" name="radio" ng-model="myForm2.checkboxVal" value="BB" />
                        <span ng-bind="myForm2.checkboxVal"></span>
                    </p>
                    <p>
                        <p>select:option</p>
                        <span>x for x in list</span>
                        <p ng-init="os=[1,2,3,4];a=os[1]" >
                            <select name="" ng-model="a" ng-options="x for x in os" ng-change="myForm2.change()">
                                <option value="">可以加上这个</option>
                            </select>
                        </p>
                        <span>obj.key as obj.value for obj in objArray</span>
                        <p ng-init="objArr=[{id:1,name:'Jun',qu:'2'},{id:2,name:'Zhang',qu:1},{id:3,name:'Si',qu:5},{id:4,name:'La',qu:5}]; b=os[2]">
                            <select name="" ng-model="b" ng-options="obj.id as obj.name for obj in objArr">
                                <option value="xx">嘻嘻嘻</option>
                            </select>

                            <br>
                            <select name="" ng-model="b" ng-options="obj.id as obj.name group by obj.qu for obj in objArr">
                                <option value="xx">嘻嘻嘻</option>
                            </select>
                        </p>

                        <span>obj.key as obj.value for (obj.k obj.v)) in obj</span>
                        <p ng-init="objobj = {a:{id:1,name:'Jun',qu:'2'},b:{id:2,name:'Zhang',qu:1},c:{id:3,name:'Si',qu:5},d:{id:4,name:'La',qu:5}}; c=os[2]">
                            <select name="" ng-model="c" ng-options="value.id as value.name for (key,value) in objobj">
                            </select>
                        </p>
                    </p>
                </form>
            </li>
            <li>
                <h3>排序 orderBy</h3>
                <p><span>原数组{{orderData.data}}</span>: <br/></p>
                <p><span>按age + </span>: <br/>{{orderData.data | orderBy: 'age'}}</p>
                <p><span>按age - </span>: <br/>{{orderData.data | orderBy : '-age'}}</p>
                <p><span>按age- limitTo 2取前两行数据</span>: <br/>{{orderData.data | orderBy : '-age' | limitTo : 2}}</p>
                <p><span>按age>name 排序，排序参数接受一个数组</span>: <br/>{{orderData.data | orderBy:['-age','name']}}</p>
            </li>
            <li>
                <h3>过滤 filter</h3>
                <p><span>过滤参数为字符串 orderData.data | filter: '1'</span>: <br>
                    {{orderData.data | filter: '1'}} <br>
                    {{orderData.data | filter: '!1'}}
                </p>
                <p><span>过滤参数为对象 orderData.data | filter:{name : 'A'}  </span>: <br>
                    {{orderData.data | filter:{name : 'A'} }}
                </p>
                <p><span>$表示任意属性 orderData.data | filter: {$ :'a'} </span>: <br>
                    {{orderData.data | filter: {$ :'a'} }}
                </p>
                <p>
                    <span>自定义过滤函数</span>: <br>
                    {{orderData.data | filter: orderData.myFilter}}
                </p>
                <p>
                    <span>其它 格式化时间戳 date 、 截取 limitTo 、 大小写 lowercase uppercase</span>
                    <p>
                        {{orderData.currentTime | date: 'yyyy-MM-dd HH:mm:ss' }}
                    </p>
                </p>
            </li>
            <li>
                <h3>例子: 表头点击排序</h3>
                <style>
                    table{
                        width: 400px;
                        border: 1px solid #F5F5F5;
                    }
                    table>thead tr{
                        text-align: center;
                        border-bottom: 1px solid #F5F5F5;
                        cursor: pointer;
                    }
                    td{
                        text-align: center;
                        padding: 5px 10px;
                    }
                </style>
                <table>
                    <thead>
                        <tr>
                            <th ng-click="f='name' ; reverse = !reverse">姓名</th>
                            <th ng-click="f='age' ; reverse = !reverse ">年龄</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr ng-repeat="x in orderData.data | orderBy : f : reverse" >
                            <td>{{x.name}}</td>
                            <td>{{x.age}}</td>
                        </tr>
                    </tbody>
                </table>
            </li>
            <li>
                <h3>例子： 搜索</h3>
                <p ng-init="findStr='';s=orderData.data[3].age">
                    <input ng-model="findStr" />
                    <select name="" ng-multiple="true" ng-model="s" ng-options="x.age as x.name for x in orderData.data | filter: {$ : findStr}">
                        
                    </select>
                </p>
            </li>
        </ul>
    </div>
</div>


<script src="../js/jquery.min.js"></script>
<script src="../js/angular-1.0.1.min.js"></script>
<script>
    var myApp = angular.module('myApp',[]);
    myApp.controller('myController',['$scope',function($scope){
        $scope.myImg = {
            src : 3
        }

        $scope.changeImg = function(){
            $scope.myImg.src ++ ;
            $scope.myImg.src  = ($scope.myImg.src > 9) ? 1 : $scope.myImg.src;
        };

        // ng-src
        $scope.myLink = {
            href : 'http://www.baidu.com'
        }

        // ng-envet (click change dblclick mousedown
        $scope.ngClick = function (e) {
            e.preventDefault();
            $(e.currentTarget).toggleClass("fcred");
        }
        $scope.ngMouseover = function (e,userData) {
            alert("Mouseover" + " " + userData);
        }
        $scope.ngDblclick = function (e) {
            $(e.currentTarget).toggleClass("fcblack");
        }

        // ng-form
        $scope.myForm = {
            username : "LiuJun",
            email: "liujun@163.com"
        }

        $scope.myForm2 = {
            username : "LiuJun",
            pass: "123456",
            checkboxVal: "AA",
            email: "liujun@163.com",
            see : function(e){
                console.log($scope.myNgForm2.$error);
            },
            change: function(e) {
                alert($scope.a);
            }
        }

        $scope.orderData = {
            data : [
                {name: 'B', age: 4},  
                {name: 'A', age: 1},  
                {name: 'D', age: 3},  
                {name: 'C', age: 2}
            ],
            myFilter : function (e) {
                return e.age > 1 && e.age < 4;
            },
            currentTime : (new Date()).getTime()
        }

        setInterval(function(){
            $scope.orderData.currentTime = (new Date()).getTime();
            $scope.$apply();
        }, 1000);
    }])
</script>
</body>
</html>