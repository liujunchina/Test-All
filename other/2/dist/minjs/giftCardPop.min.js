!function(e){"use strict";window.GiftCardForm=function(e){return this.callBack=e,this},GiftCardForm.prototype={open:function(){var e=this;e.layerIndex=layer.open({title:"激活礼品卡",content:this.getForm(),area:["450px","290px"],end:function(){},type:1,shadeClose:!1},!0)},getForm:function(){return"undefined"==typeof this.form&&(this.form=this.createForm()),this.form},createForm:function(){var a=e("<form />");return a.attr({"class":"gift-card-form none cart_global_form user-global-form"}).css({paddingLeft:"20px",paddingRight:"20px"}).html('<label><span class="form-label">礼品卡卡号：</span><span><input onkeyup="GLOBAL.otherGlobal.inputLimitedDigital(this)" maxlength="16" type="text" name="code" placeholder="请输入16位卡号"></span></label><label><span class="form-label">激活码：</span><span><input onkeyup="GLOBAL.otherGlobal.inputToUpperCase(this)" maxlength="6" type="text" name="pass" placeholder="请刮开礼品卡背面的激活码"></span></label><p class="mt20"><span class="form-label">&nbsp;</span><a class="btn btn-default js_submit" href="javascript:;" onclick="return false;">确定</a><a class="btn btn-outline js_cancel ml30" href="javascript:;" onclick="return false;">取消</a></p>'),a.appendTo("body"),this.validate(a),a},formReset:function(e){this.formValidate.resetForm(),e[0].reset()},validate:function(a){var t=this;$LAB.script("jquery.validate.min.js").wait(function(){e.validator.setDefaults({debug:!1,success:"valid"}),t.formValidate=a.validate({errorClass:"form-error",wrapper:"p",success:function(e){e.remove()},errorPlacement:function(e,a){a.parent().parent().find(".error").remove(),e.prepend('<span class="span-form-label">&nbsp;</span>'),e.addClass("error").appendTo(a.parent().parent())},rules:{code:{required:!0,rangelength:[16,16],digits:!0},pass:{required:!0,rangelength:[6,6]}},messages:{code:{required:"请输入礼品卡卡号",rangelength:"请输入正确的礼品卡卡号",digits:"礼品卡卡号为数字"},pass:{required:"请输入礼品卡密码",rangelength:"请输入正确的礼品卡密码"}}}),a.find(".js_cancel").click(function(){t.formReset(a),layer.close(t.layerIndex)}),a.find(".js_submit").on("click",function(){a.valid()&&t.callBack.call(a,t.layerIndex)})})}}}(jQuery);