!function(a,b){function m(b,c){var h,i,e=arguments.length,f=this.options,g=this.element,k=0,l=new FormData;if(f.name=f.name||g.name||"upload",0===e?h=g.files||[]:1===e?h=b.length?b:[b]:i=b,i)l.append(f.name,i,c);else if(h&&h.length&&h.length>1)for(;k<h.length;k++)l.append(f.name+"[]",h[k]);else{if(!h||1!==h.length)return f.oncomplete.call(g);l.append(f.name,h[k])}for(k in f.data)l.append(k,f.data[k]);a.ajax({xhr:function(){var b=a.ajaxSettings.xhr();return b.upload.onprogress=a.proxy(f.onprogress,g),b},headers:f.headers,url:f.action,type:"post",dataType:"json",data:l,processData:!1,contentType:!1}).done(a.proxy(f.onsuccess,g)).fail(a.proxy(f.onerror,g)).always(a.proxy(f.oncomplete,g))}function n(){function n(){g.remove(),h.remove(),d.oncomplete.call(c,m)}var g,h,i,j,l,b=this,c=b.element,d=b.options,e=Date.now(),k="",m={};if(!c.value)return d.oncomplete.call(c);d.name=d.name||c.name||"upload",a(c).appendTo(h),g=a('<iframe src="javascript:false" name="iframe-name-'+e+'" style="display:none;"></iframe>').appendTo(f),h=a('<form action="'+d.action+'" method="post" enctype="multipart/form-data" target="iframe-name-'+e+'" style="display:none;"></form>').appendTo(f),i=a('<input type="submit">').appendTo(h),j=a(c).clone(!0,!0).insertAfter(c);for(l in d.data)k+='<input type="hidden" name="'+l+'" value="'+d.data[l]+'">';k&&a(k).appendTo(h),g.load(function(){var b=a(this).contents().text();try{m=a.parseJSON(b)}catch(e){}a.isEmptyObject(m)?d.onerror.call(c,m):d.onsuccess.call(c,m),n()}).error(function(){d.onerror.call(c,m),n()}),i.trigger("click")}function o(b){return"INPUT"===a(b).prop("tagName")&&"file"===a(b).attr("type")}var d="jquery-upload",e=b.document,f=e.body,g=null===e.createElement("input").files||"files"in e.createElement("input"),h=!!window.FormData,i=g&&h,j=function(){},k={action:"",headers:{},data:null,name:"",oncomplete:j,onsuccess:j,onerror:j,onprogress:j};a.fn.upload=function(b){var c="string"===a.type(b),e=c?{}:a.extend({},k,b),f=[].slice.call(arguments);return this.each(function(){var g=a(this).data(d);g?c||(g.options=a.extend({},g.options,b)):a(this).data(d,g=new l(this,e)),c?g[b]&&g[b].apply(g,f.slice(1)):g._init()})},a.fn.upload.defaults=k,a.support.inputFiles=g,a.support.formData=h;var l=function(a,b){this.element=a,this.options=b};l.prototype={_init:function(){o(this.element)&&(i?m.call(this):n.call(this))},blob:function(a,b){m.call(this,a,b)},files:function(a){m.call(this,a)},file:function(a){m.call(this,a)}}}($,this);