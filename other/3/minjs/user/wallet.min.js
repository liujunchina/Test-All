function checkWalletPas(a,b,c){a.validate({rules:{curPassword:{required:!0,minlength:6,maxlength:10,isRightfulString:!0},password:{required:!0,minlength:6,maxlength:10,isRightfulString:!0},password_confirm:{required:!0,minlength:6,maxlength:10,isRightfulString:!0,equalTo:a.find(".js_setWalletpassword")}},messages:{curPassword:{required:jsLg.formMsg.password,minlength:jsLg.formMsg.password_minlength,maxlength:jsLg.formMsg.passwor_maxlength},password:{required:jsLg.formMsg.password,minlength:jsLg.formMsg.password_minlength,maxlength:jsLg.formMsg.passwor_maxlength},password_confirm:{required:jsLg.formMsg.password_repeat,minlength:jsLg.formMsg.password_minlength,maxlength:jsLg.formMsg.passwor_maxlength,equalTo:jsLg.formMsg.password_repeat}},errorPlacement:function(a,b){b.parent().find("label.checked").remove(),a.appendTo(b.parent())},success:function(a){a.remove()},submitHandler:function(){b&&"function"==typeof b&&b(a,c)}})}function checkFormSuc(a,b){var c=a.find("submit");c.prop({disabled:!0}),layer.close(walletPopIndex),$.ajax({url:b.url,type:"POST",dataType:"json",data:{password:a.find("input[name=password]").val(),password_confirm:a.find("input[name=password_confirm]").val(),curPassword:a.find("input[name=curPassword]").val()},success:function(a){c.prop({disabled:!1}),1==a.status?(layer.close(b.popIndx),$.layer({type:1,title:!1,area:["auto","auto"],border:[0],offset:[($(window).height()-$(b.sucPopObj).height())/2,"50%"],page:{dom:b.sucPopObj},close:function(a){layer.close(a),window.location.reload()}})):GLOBAL.PopObj.alert({msg:a.msg})}})}jQuery.validator.addMethod("isRightfulString",function(a,b){return this.optional(b)||/[A-Za-z]+/.test(a)&&/[0-9]+/.test(a)},jsLg.wallet.isRightfulString);var walletPopIndex=null;!function(){var a=$("#js_setWalletPopBox"),b=a.outerHeight();a.length&&$("#js_setWalletPasBtn").on("click",function(){var c=a.html();walletPopIndex=GLOBAL.PopObj.openPop({border:[0],offset:[($(window).height()-b)/2,"50%"],page:{html:c},success:function(){a.html("")},end:function(){a.html(c)}}),checkWalletPas($("#js_setWalletPassForm"),checkFormSuc,{url:"/"+JS_LANG+"m-users-a-set_wallet_password.htm",sucPopObj:"#js_setWalletSucPop"})})}(),function(){var a=$("#js_resetWalletPopBox"),b=a.outerHeight();a.length&&$("#js_resetWalletPasBtn").on("click",function(){var c=a.html();walletPopIndex=GLOBAL.PopObj.openPop({border:[0],offset:[($(window).height()-b)/2,"50%"],page:{html:c},success:function(){a.html("")},end:function(){a.html(c)}}),checkWalletPas($("#js_resetWalletPassForm"),checkFormSuc,{url:"/"+JS_LANG+"m-users-a-set_wallet_password.htm",sucPopObj:"#js_resetWalletSucPop"})})}(),function(){$("#js_sendEmailBtn").on("click",function(){var a=$(this);return a.hasClass("isSend")?!1:($("#js_stepW").addClass("stepW1"),$("#js_sendEmailTips").fadeIn(),a.addClass("isSend"),$.get("/"+JS_LANG+"m-users-a-retrieve_wallet_password.htm?step=step1&send_email=1",function(){}),void 0)}),checkWalletPas($("#js_stepsetWalletPassForm"),function(a){a.submit()},{})}();